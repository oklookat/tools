import{S as oe,i as le,s as ce,k as S,a as V,e as Z,K as ue,l as w,h as c,c as M,n as D,B as _,b as $,f as y,t as E,d as H,o as fe,D as de,v as P,w as L,x as j,y as F,q as A,m as I,r as q,p as x,A as ne,u as ie,C as he,g as J,N as me}from"../../../chunks/index-314c1f20.js";import{A as _e}from"../../../chunks/about_overlay-da8a3528.js";import{B as Q}from"../../../chunks/button-283a2017.js";class pe extends MediaRecorder{constructor(e){super(e,{mimeType:"audio/wav"}),this.duration=new $e,this.onStateChanged&&this.onStateChanged("inactive")}set onDurationChanged(e){this.duration.onDurationChanged=e}destroy(){this.duration.stop(),this.onStateChanged&&this.onStateChanged("inactive")}start(e){super.start(e),this.duration.start(),this.onStateChanged&&this.onStateChanged("recording")}pause(){super.pause(),this.duration.pause(),this.onStateChanged&&this.onStateChanged("paused")}resume(){super.resume(),this.duration.start(),this.onStateChanged&&this.onStateChanged("recording")}stop(){super.stop(),this.destroy(),this.onStateChanged&&this.onStateChanged("inactive")}}function ve(n,e="auto"){n=Math.round(n);const s={hours:[11,19],minutes:[14,19]};let t=[0,0];switch(e){case"auto":t=n<3600?s.minutes:s.hours;break;case"hours":t=s.hours;break;case"minutes":t=s.minutes;break}let r="00:00";try{r=new Date(n*1e3).toISOString().substring(t[0],t[1])}catch{}return r}class $e{constructor(){this._seconds=0,this.isIdle=!0}set seconds(e){this._seconds=e,this.onDurationChanged&&this.onDurationChanged(this.seconds)}get seconds(){return this._seconds}start(){this.applyInterval(),this.isIdle=!1}pause(){this.isIdle=!0}stop(){this.pause(),this.seconds=0,this.interval&&clearInterval(this.interval)}applyInterval(){this.interval&&clearInterval(this.interval),this.interval=setInterval(()=>{this.isIdle||this.seconds++},1e3)}}function ee(n){let e,s;return e=new _e({props:{onClose:n[10],$$slots:{default:[be]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,r){j(e,t,r),s=!0},p(t,r){const a={};r&16&&(a.onClose=t[10]),r&65536&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function be(n){let e,s,t,r,a,b,k,l,f,d,i,u;return{c(){e=S("div"),s=A("\u0417\u0430\u043F\u0438\u0441\u044C \u043C\u0438\u043A\u0440\u043E\u0444\u043E\u043D\u0430 \u0441 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u044C\u044E \u043F\u0440\u043E\u0441\u043B\u0443\u0448\u0438\u0432\u0430\u043D\u0438\u044F \u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E."),t=V(),r=S("div"),a=S("b"),b=A("\u0421\u0442\u043E\u0440\u043E\u043D\u043D\u0438\u0435 \u0431\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0438:"),k=V(),l=S("a"),f=A("extendable-media-recorder"),d=V(),i=S("a"),u=A("extendable-media-recorder-wav-encoder"),this.h()},l(o){e=w(o,"DIV",{});var h=I(e);s=q(h,"\u0417\u0430\u043F\u0438\u0441\u044C \u043C\u0438\u043A\u0440\u043E\u0444\u043E\u043D\u0430 \u0441 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u044C\u044E \u043F\u0440\u043E\u0441\u043B\u0443\u0448\u0438\u0432\u0430\u043D\u0438\u044F \u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E."),h.forEach(c),t=M(o),r=w(o,"DIV",{});var B=I(r);a=w(B,"B",{});var N=I(a);b=q(N,"\u0421\u0442\u043E\u0440\u043E\u043D\u043D\u0438\u0435 \u0431\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0438:"),N.forEach(c),B.forEach(c),k=M(o),l=w(o,"A",{href:!0,style:!0});var R=I(l);f=q(R,"extendable-media-recorder"),R.forEach(c),d=M(o),i=w(o,"A",{href:!0,style:!0});var U=I(i);u=q(U,"extendable-media-recorder-wav-encoder"),U.forEach(c),this.h()},h(){D(l,"href","https://github.com/chrisguttandin/extendable-media-recorder"),x(l,"text-decoration","underline"),D(i,"href","https://github.com/chrisguttandin/extendable-media-recorder-wav-encoder"),x(i,"text-decoration","underline")},m(o,h){$(o,e,h),_(e,s),$(o,t,h),$(o,r,h),_(r,a),_(a,b),$(o,k,h),$(o,l,h),_(l,f),$(o,d,h),$(o,i,h),_(i,u)},p:ne,d(o){o&&c(e),o&&c(t),o&&c(r),o&&c(k),o&&c(l),o&&c(d),o&&c(i)}}}function te(n){let e,s=n[0].message+"",t;return{c(){e=S("div"),t=A(s),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=I(e);t=q(a,s),a.forEach(c),this.h()},h(){D(e,"class","attention svelte-h3qv3a")},m(r,a){$(r,e,a),_(e,t)},p(r,a){a&1&&s!==(s=r[0].message+"")&&ie(t,s)},d(r){r&&c(e)}}}function se(n){let e,s,t,r,a,b,k,l,f,d,i,u,o,h,B,N,R,U,g;const K=[Ce,ke,ge],T=[];function W(m,v){return m[2]==="inactive"?0:m[2]==="recording"?1:m[2]==="paused"?2:-1}~(o=W(n))&&(h=T[o]=K[o](n));let p=n[2]!=="inactive"&&re(n),C=n[3].length>0&&ae(n);return{c(){e=S("div"),s=S("div"),t=A("\u041C\u0430\u0439\u043A\u043B v1.0"),r=V(),a=S("div"),b=A("\u041E\u0431 \u0443\u0442\u0438\u043B\u0438\u0442\u0435"),k=V(),l=S("div"),f=S("div"),d=A(n[1]),i=V(),u=S("div"),h&&h.c(),B=V(),p&&p.c(),N=V(),C&&C.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var v=I(e);s=w(v,"DIV",{class:!0});var O=I(s);t=q(O,"\u041C\u0430\u0439\u043A\u043B v1.0"),O.forEach(c),r=M(v),a=w(v,"DIV",{class:!0});var X=I(a);b=q(X,"\u041E\u0431 \u0443\u0442\u0438\u043B\u0438\u0442\u0435"),X.forEach(c),k=M(v),l=w(v,"DIV",{class:!0});var z=I(l);f=w(z,"DIV",{class:!0});var Y=I(f);d=q(Y,n[1]),Y.forEach(c),i=M(z),u=w(z,"DIV",{class:!0});var G=I(u);h&&h.l(G),B=M(G),p&&p.l(G),G.forEach(c),z.forEach(c),N=M(v),C&&C.l(v),v.forEach(c),this.h()},h(){D(s,"class","util-title"),D(a,"class","underline"),D(f,"class","time svelte-h3qv3a"),D(u,"class","controls svelte-h3qv3a"),D(l,"class","recorder svelte-h3qv3a"),D(e,"class","michael svelte-h3qv3a")},m(m,v){$(m,e,v),_(e,s),_(s,t),_(e,r),_(e,a),_(a,b),_(e,k),_(e,l),_(l,f),_(f,d),_(l,i),_(l,u),~o&&T[o].m(u,null),_(u,B),p&&p.m(u,null),_(e,N),C&&C.m(e,null),R=!0,U||(g=he(a,"click",n[11]),U=!0)},p(m,v){(!R||v&2)&&ie(d,m[1]);let O=o;o=W(m),o===O?~o&&T[o].p(m,v):(h&&(J(),E(T[O],1,1,()=>{T[O]=null}),H()),~o?(h=T[o],h?h.p(m,v):(h=T[o]=K[o](m),h.c()),y(h,1),h.m(u,B)):h=null),m[2]!=="inactive"?p?(p.p(m,v),v&4&&y(p,1)):(p=re(m),p.c(),y(p,1),p.m(u,null)):p&&(J(),E(p,1,1,()=>{p=null}),H()),m[3].length>0?C?C.p(m,v):(C=ae(m),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},i(m){R||(y(h),y(p),R=!0)},o(m){E(h),E(p),R=!1},d(m){m&&c(e),~o&&T[o].d(),p&&p.d(),C&&C.d(),U=!1,g()}}}function ge(n){let e,s;return e=new Q({props:{$$slots:{default:[Se]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,r){j(e,t,r),s=!0},p(t,r){const a={};r&65536&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function ke(n){let e,s;return e=new Q({props:{$$slots:{default:[we]},$$scope:{ctx:n}}}),e.$on("click",n[7]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,r){j(e,t,r),s=!0},p(t,r){const a={};r&65536&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function Ce(n){let e,s;return e=new Q({props:{$$slots:{default:[ye]},$$scope:{ctx:n}}}),e.$on("click",n[6]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,r){j(e,t,r),s=!0},p(t,r){const a={};r&65536&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function Se(n){let e;return{c(){e=A("\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C")},l(s){e=q(s,"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C")},m(s,t){$(s,e,t)},d(s){s&&c(e)}}}function we(n){let e;return{c(){e=A("\u041F\u0430\u0443\u0437\u0430")},l(s){e=q(s,"\u041F\u0430\u0443\u0437\u0430")},m(s,t){$(s,e,t)},d(s){s&&c(e)}}}function ye(n){let e;return{c(){e=A("\u0417\u0430\u043F\u0438\u0441\u044C")},l(s){e=q(s,"\u0417\u0430\u043F\u0438\u0441\u044C")},m(s,t){$(s,e,t)},d(s){s&&c(e)}}}function re(n){let e,s;return e=new Q({props:{$$slots:{default:[De]},$$scope:{ctx:n}}}),e.$on("click",n[9]),{c(){P(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,r){j(e,t,r),s=!0},p(t,r){const a={};r&65536&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function De(n){let e;return{c(){e=A("\u0421\u0442\u043E\u043F")},l(s){e=q(s,"\u0421\u0442\u043E\u043F")},m(s,t){$(s,e,t)},d(s){s&&c(e)}}}function ae(n){let e,s,t;return{c(){e=S("div"),s=S("audio"),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=I(e);s=w(a,"AUDIO",{src:!0}),I(s).forEach(c),a.forEach(c),this.h()},h(){s.controls=!0,me(s.src,t=n[5]())||D(s,"src",t),D(e,"class","player svelte-h3qv3a")},m(r,a){$(r,e,a),_(e,s)},p:ne,d(r){r&&c(e)}}}function Ie(n){let e,s,t,r,a,b,k,l=n[4]&&ee(n),f=n[0].active&&te(n),d=!n[0].active&&se(n);return{c(){e=S("meta"),s=S("meta"),t=V(),l&&l.c(),r=V(),f&&f.c(),a=V(),d&&d.c(),b=Z(),this.h()},l(i){const u=ue('[data-svelte="svelte-vsmof7"]',document.head);e=w(u,"META",{property:!0,content:!0}),s=w(u,"META",{name:!0,content:!0}),u.forEach(c),t=M(i),l&&l.l(i),r=M(i),f&&f.l(i),a=M(i),d&&d.l(i),b=Z(),this.h()},h(){document.title="\u041C\u0430\u0439\u043A\u043B",D(e,"property","og:title"),D(e,"content","\u041C\u0430\u0439\u043A\u043B"),D(s,"name","description"),D(s,"content","\u0417\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0437\u0432\u0443\u043A \u0441 \u043C\u0438\u043A\u0440\u043E\u0444\u043E\u043D\u0430, \u043F\u0440\u043E\u0441\u043B\u0443\u0448\u0430\u0442\u044C, \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C.")},m(i,u){_(document.head,e),_(document.head,s),$(i,t,u),l&&l.m(i,u),$(i,r,u),f&&f.m(i,u),$(i,a,u),d&&d.m(i,u),$(i,b,u),k=!0},p(i,[u]){i[4]?l?(l.p(i,u),u&16&&y(l,1)):(l=ee(i),l.c(),y(l,1),l.m(r.parentNode,r)):l&&(J(),E(l,1,1,()=>{l=null}),H()),i[0].active?f?f.p(i,u):(f=te(i),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null),i[0].active?d&&(J(),E(d,1,1,()=>{d=null}),H()):d?(d.p(i,u),u&1&&y(d,1)):(d=se(i),d.c(),y(d,1),d.m(b.parentNode,b))},i(i){k||(y(l),y(d),k=!0)},o(i){E(l),E(d),k=!1},d(i){c(e),c(s),i&&c(t),l&&l.d(i),i&&c(r),f&&f.d(i),i&&c(a),d&&d.d(i),i&&c(b)}}}function Ee(n,e,s){const t={active:!0,message:"\u0416\u0434\u0435\u043C \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u043D\u0430 \u0434\u043E\u0441\u0442\u0443\u043F \u043A \u043C\u0438\u043A\u0440\u043E\u0444\u043E\u043D\u0443."};let r,a,b="00:00",k="inactive";fe(async()=>{await l()}),de(()=>{!a||a.destroy()});async function l(){let g;try{r=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(K){g=K}if(!g){r?(s(0,t.active=!1,t),i()):s(0,t.message="\u041C\u0438\u043A\u0440\u043E\u0444\u043E\u043D \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D. \u041C\u043E\u0436\u0435\u0442 \u0432\u044B \u043F\u0440\u043E\u0438\u0433\u043D\u043E\u0440\u0438\u0440\u043E\u0432\u0430\u043B\u0438 \u0434\u0438\u0430\u043B\u043E\u0433 \u043D\u0430 \u0434\u043E\u0441\u0442\u0443\u043F \u043A \u043C\u0438\u043A\u0440\u043E\u0444\u043E\u043D\u0443?",t);return}switch(s(0,t.active=!0,t),"name"in g||s(0,t.message=g,t),g.name){default:s(0,t.message=`${g}`,t);break;case"NotAllowedError":s(0,t.message="\u0414\u043E\u0441\u0442\u0443\u043F \u043A \u043C\u0438\u043A\u0440\u043E\u0444\u043E\u043D\u0443 \u0437\u0430\u043F\u0440\u0435\u0449\u0435\u043D.",t);break;case"NotFoundError":s(0,t.message="\u0423\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u0434\u043B\u044F \u0437\u0430\u043F\u0438\u0441\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E.",t);break}}let f=[];function d(){const g=new Blob(f,{type:a.mimeType});return window.URL.createObjectURL(g)}function i(){a=new pe(r),a.onDurationChanged=g=>{s(1,b=ve(g))},a.onStateChanged=g=>{s(2,k=g)},a.ondataavailable=g=>{f.push(g.data),s(3,f)}}function u(){s(3,f=[]),a.start()}function o(){a.pause()}function h(){a.resume()}function B(){a.stop()}let N=!1;return[t,b,k,f,N,d,u,o,h,B,()=>s(4,N=!1),()=>s(4,N=!0)]}class Me extends oe{constructor(e){super(),le(this,e,Ee,Ie,ce,{})}}export{Me as default};
